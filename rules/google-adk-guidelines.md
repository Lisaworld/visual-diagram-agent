---

# 📘 rules/google-adk-guidelines.md

이 문서는 현재 프로젝트가 Google Agent Development Kit (ADK)의 구조와 원칙을 잘 따르고 있는지 점검하기 위한 기준입니다.

## ✅ ADK 설계 원칙 점검표

| 항목                                 | 설명                                       | 구현 시 체크 포인트                                    |
| ---------------------------------- | ---------------------------------------- | ---------------------------------------------- |
| **1. Agent = 함수 + 선언적 메타데이터**      | 모든 에이전트는 `handler.ts` + `agent.yaml`로 구성 | `agent.yaml`에 이름, 입력/출력 타입, 호출 대상 정의했는가?       |
| **2. Agent는 조립 가능해야 함**            | 상위 Agent가 하위 Agent를 호출해 작업 분해            | `calls:` 필드를 통해 계층 구조가 자연스러운가?                 |
| **3. 입력/출력은 구조화된 JSON 형식**         | 타입 정의는 명확하고 일관되어야 함                      | `types/diagram.ts` 등에서 정확한 타입 분리했는가?           |
| **4. Stateless → 필요 시 context 전달** | Agent는 가능한 순수 함수처럼, 상태는 명시적 전달           | 상태가 암묵적으로 공유되지 않고 입력/출력으로만 흘러가는가?              |
| **5. Composition이 핵심**             | 여러 기능을 작은 Agent로 나누고 조합                  | 각 도식 유형(Flowchart, Tree 등)이 독립 Agent로 나뉘어 있는가? |
| **6. handler는 pure function이어야 함** | 부작용 없이 입력 → 출력으로만 구성                     | `console.log` 외에는 외부 호출 없이 순수 계산인가?            |
| **7. 확장 가능하도록 설계**                 | 향후 LLM이나 외부 API 붙이기 쉬워야 함                | mock 구현에서 실제 호출로 바꾸기 쉬운 구조인가?                  |
| **8. testable + observable**       | 단위 테스트 및 실행 로그 확인 가능해야 함                 | 각 handler가 예시 입력으로 쉽게 테스트 가능한가?                |

---

## 📌 현재 프로젝트 상태와 매핑 예시

| 항목          | 현재 상태                                                             | 점검 결과       |
| ----------- | ----------------------------------------------------------------- | ----------- |
| Agent 구조화   | ✅ `agent.yaml + handler.ts` 구성 완료                                 | 양호          |
| 호출 흐름 구성    | ✅ DiagramBuilder → Interpreter → Generator → 하위 → Renderer/Export | 양호          |
| 타입 정의       | ✅ types/diagram.ts, export.ts 분리                                  | 양호          |
| handler 순수성 | ✅ mock 기반 순수 로직                                                   | 양호          |
| 확장성         | ⏳ LLM 미도입, 구조는 준비됨                                                | 적절          |
| 상태 관리       | ✅ React Context API + AgentContext 사용                              | 양호          |

---

## 📌 UI 구현 가이드라인

### 1. 컴포넌트 구조
- InputBox: 사용자 입력 처리 및 다이어그램 생성 트리거
- DiagramRenderer: 생성된 다이어그램 표시
- ControlPanel: 다이어그램 편집 도구

### 2. 상태 관리
- AgentContext를 통한 중앙 집중식 상태 관리
- 각 Agent의 상태는 context를 통해 명시적으로 전달
- 비동기 작업 상태 표시 (로딩, 에러 등)

### 3. 사용자 경험
- 키보드 단축키 지원 (⌘ + Enter)
- 실시간 피드백 (로딩 스피너, 에러 메시지)
- 접근성 고려 (ARIA 레이블, 키보드 네비게이션)

### 4. 스타일링
- TailwindCSS를 활용한 일관된 디자인
- 반응형 레이아웃
- 다크모드 지원 준비

---

## 📌 권장 액션

* [ ] `DiagramBuilderAgent`에 context/memory 구조를 도입할 필요가 있는지 검토
* [ ] 상태 공유가 필요할 경우 context 객체의 명시적 전달 구조 고려
* [ ] LLM 연동 시, 호출할 모델과 설정값에 대한 필드를 추가하거나 준비
* [ ] UI 컴포넌트의 단위 테스트 작성
* [ ] 다크모드 지원을 위한 테마 시스템 구현
* [ ] 접근성 검사 및 개선

이 문서는 ADK 기반 에이전트 프로젝트의 구조를 지속적으로 검토하고 개선하기 위한 기준으로 활용됩니다.
